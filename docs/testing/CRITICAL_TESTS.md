# üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã - Test Guide

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–±—ä—è—Å–Ω—è–µ—Ç **—Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã** –≤ –ø—Ä–æ–µ–∫—Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ **–Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å –∏–ª–∏ –ª–æ–º–∞—Ç—å**.

---

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –æ—Ç–º–µ—á–µ–Ω—ã —Ç–∞–∫:

–í —Ñ–∞–π–ª–∞—Ö —Ç–µ—Å—Ç–æ–≤ –∏—â–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:
```typescript
// ‚ö†Ô∏è CRITICAL TEST - DO NOT REMOVE
```

---

## 1. Trade Model - initialEntryPrice –∏ initialAmount

**–§–∞–π–ª**: `src/__tests__/models/trade.test.ts`
**–°—Ç—Ä–æ–∫–∏**: 315-344 –∏ 346-375

### –ü–æ—á–µ–º—É –∫—Ä–∏—Ç–∏—á–Ω–æ:

–≠—Ç–∏ –ø–æ–ª—è **–ù–ò–ö–û–ì–î–ê** –Ω–µ –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è trade.

#### initialEntryPrice
```typescript
// –°–æ–∑–¥–∞–µ–º LONG —Å entryPrice = 100,000
const trade = await Trade.create({
  entryPrice: 100000,
  initialEntryPrice: 100000,  // ‚Üê –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –Ω–∞–≤—Å–µ–≥–¥–∞
});

// –ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü –∑–∞–∫—Ä—ã–≤–∞–µ–º SHORT, entryPrice –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
trade.entryPrice = 95000;
await trade.save();

// –ù–û initialEntryPrice –æ—Å—Ç–∞–µ—Ç—Å—è 100,000 ‚úì
expect(trade.initialEntryPrice).toBe(100000);
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏:**
1. –û—Ç–∫—Ä—ã–≤–∞–µ—à—å LONG –Ω–∞ 1 BTC –ø–æ —Ü–µ–Ω–µ 100,000 USD
2. `entryPrice = 100,000`, `initialEntryPrice = 100,000`
3. –û—Ç–∫—Ä—ã–≤–∞–µ—à—å SHORT –Ω–∞ 0.5 BTC, –ø—Ä–æ–¥–∞–µ—à—å –ø–æ 110,000
4. –ó–∞–∫—Ä—ã–≤–∞–µ—à—å SHORT, –≤—ã–∫—É–ø–∞–µ—à—å –ø–æ 105,000
5. –í—ã–∫—É–ø–∏–ª 0.52 BTC (–ø—Ä–æ—Ñ–∏—Ç –≤ –º–æ–Ω–µ—Ç–∞—Ö!)
6. –¢–µ–ø–µ—Ä—å —É LONG 1.02 BTC –≤–º–µ—Å—Ç–æ 1.0
7. **entryPrice –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è**: `100,000 / 1.02 = 98,039 USD`
8. **–ù–û initialEntryPrice –æ—Å—Ç–∞–µ—Ç—Å—è 100,000** - —ç—Ç–æ —Ç–≤–æ—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –î–ª—è –∏—Å—Ç–æ—Ä–∏–∏: –º–æ–∂–µ—à—å —É–≤–∏–¥–µ—Ç—å –ø–æ –∫–∞–∫–æ–π —Ü–µ–Ω–µ **–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ** –∫—É–ø–∏–ª
- –î–ª—è –æ—Ç—á–µ—Ç–æ–≤: –ø—Ä–æ—Ñ–∏—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç initial, –∞ –Ω–µ –æ—Ç —Ç–µ–∫—É—â–µ–π
- –î–ª—è –Ω–∞–ª–æ–≥–æ–≤: –Ω—É–∂–Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

**–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ü–æ—Ç–µ—Ä—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π ROI
- SHORT –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç –ø–æ—Ä—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

---

#### initialAmount

```typescript
// –°–æ–∑–¥–∞–µ–º LONG —Å 1.0 BTC
const trade = await Trade.create({
  amount: 1.0,
  initialAmount: 1.0,  // ‚Üê –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –Ω–∞–≤—Å–µ–≥–¥–∞
});

// –ü–æ—Å–ª–µ SHORT close –¥–æ–±–∞–≤–∏–ª–∏—Å—å –º–æ–Ω–µ—Ç—ã
trade.amount = 1.05;  // –¢–µ–ø–µ—Ä—å 1.05 BTC
await trade.save();

// –ù–û initialAmount –æ—Å—Ç–∞–µ—Ç—Å—è 1.0 ‚úì
expect(trade.initialAmount).toBe(1.0);
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏:**
1. –ö—É–ø–∏–ª 1.0 BTC
2. –û—Ç–∫—Ä—ã–ª SHORT, –ø—Ä–æ–¥–∞–ª 0.5 BTC
3. –ó–∞–∫—Ä—ã–ª SHORT, –≤—ã–∫—É–ø–∏–ª 0.52 BTC (–ø—Ä–æ—Ñ–∏—Ç!)
4. –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è 1.02 BTC
5. **amount = 1.02**, –Ω–æ **initialAmount = 1.0**

**–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:**
- –ó–Ω–∞–µ—à—å —Å–∫–æ–ª—å–∫–æ **–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ** –∫—É–ø–∏–ª
- –ú–æ–∂–µ—à—å —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –∑–∞—Ä–∞–±–æ—Ç–∞–ª —á–µ—Ä–µ–∑ SHORT (1.02 - 1.0 = 0.02 BTC)
- –î–ª—è –æ—Ç—á–µ—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–ª —á–µ—Ä–µ–∑ SHORT
- –ò—Å—Ç–æ—Ä–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–ø–∞–¥–µ—Ç

---

## 2. Calculations - LONG Profit USD

**–§–∞–π–ª**: `src/__tests__/lib/calculations.test.ts`
**–°—Ç—Ä–æ–∫–∏**: 9-26

### –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:

–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Ñ–∏—Ç–∞ LONG - —ç—Ç–æ **–æ—Å–Ω–æ–≤–∞ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**.

```typescript
// –í–ª–æ–∂–∏–ª 1010 USD, –ø–æ–ª—É—á–∏–ª 0.01 BTC
// –ü—Ä–æ–¥–∞–ª –ø–æ 110,000 —Å fee 1%

const profit = calculateLongProfitUSD(0.01, 1010, 110000, 1);

// Exit value: 0.01 √ó 110,000 √ó 0.99 = 1089 USD
// Profit: 1089 - 1010 = 79 USD
expect(profit).toBeCloseTo(79, 1);
```

**–§–æ—Ä–º—É–ª–∞:**
```
exitValue = amount √ó exitPrice √ó (100 - exitFee) / 100
profit = exitValue - sumPlusFee
```

**–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –í—Å–µ –ø—Ä–æ—Ñ–∏—Ç—ã LONG –±—É–¥—É—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–∏–¥—è—Ç –Ω–µ–≤–µ—Ä–Ω—ã–µ —Ü–∏—Ñ—Ä—ã
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ—Ä—á–µ–Ω–∞

---

## 3. Calculations - SHORT Profit Coins

**–§–∞–π–ª**: `src/__tests__/lib/calculations.test.ts`
**–°—Ç—Ä–æ–∫–∏**: 111-132

### –ü–æ—á–µ–º—É –∫—Ä–∏—Ç–∏—á–Ω–æ:

SHORT –ø—Ä–æ—Ñ–∏—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è **–≤ –º–æ–Ω–µ—Ç–∞—Ö**, –Ω–µ –≤ USD!

```typescript
// –ü—Ä–æ–¥–∞–ª 0.5 BTC, –ø–æ–ª—É—á–∏–ª 54,450 USD
// –í—ã–∫—É–ø–∏–ª –ø–æ 100,000 —Å fee 1%

const profitCoins = calculateShortProfitCoins(0.5, 54450, 100000, 1);

// Buy back price: 100,000 √ó 1.01 = 101,000
// Coins bought: 54,450 / 101,000 = 0.5391 BTC
// Profit: 0.5391 - 0.5 = 0.0391 BTC
expect(profitCoins).toBeCloseTo(0.0391, 4);
```

**–§–æ—Ä–º—É–ª–∞:**
```
buyBackPriceWithFee = buyBackPrice √ó (100 + buyBackFee) / 100
coinsBoughtBack = sumPlusFee / buyBackPriceWithFee
profit = coinsBoughtBack - soldAmount
```

**–í–ê–ñ–ù–û:** –ü—Ä–æ—Ñ–∏—Ç –≤ **–º–æ–Ω–µ—Ç–∞—Ö**, –Ω–µ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö!

**–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- SHORT –ø—Ä–æ—Ñ–∏—Ç –±—É–¥–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- Parent LONG –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Ç–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É USD –∏ –º–æ–Ω–µ—Ç–∞–º–∏

---

## 4. Calculations - recalculateLongEntryPrice

**–§–∞–π–ª**: `src/__tests__/lib/calculations.test.ts`
**–°—Ç—Ä–æ–∫–∏**: 230-243

### –ü–æ—á–µ–º—É –∫—Ä–∏—Ç–∏—á–Ω–æ:

–ö–æ–≥–¥–∞ SHORT –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å entry price —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ LONG.

```typescript
// LONG: –ø–æ—Ç—Ä–∞—Ç–∏–ª 100,000 USD –Ω–∞ 1.0 BTC
// –ü–æ—Å–ª–µ SHORT: —Ç–µ–ø–µ—Ä—å 1.05 BTC (–¥–æ–±–∞–≤–∏–ª–∏—Å—å –≤—ã–∫—É–ø–ª–µ–Ω–Ω—ã–µ)

const newEntryPrice = recalculateLongEntryPrice(100000, 1.05);

// 100,000 / 1.05 = 95,238.095
expect(newEntryPrice).toBeCloseTo(95238.095, 2);
```

**–§–æ—Ä–º—É–ª–∞:**
```
newEntryPrice = originalSumPlusFee / newTotalAmount
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –¢—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª 100,000 USD
- –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è 1.05 BTC –≤–º–µ—Å—Ç–æ 1.0
- –¢–≤–æ—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞: 95,238 USD –∑–∞ BTC (—É–ª—É—á—à–∏–ª–∞—Å—å!)

**–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- Parent LONG –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ SHORT
- Entry price –±—É–¥–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü—Ä–æ—Ñ–∏—Ç LONG –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–µ–≤–µ—Ä–Ω–æ

---

## 5. Portfolio - Coin Allocation

**–§–∞–π–ª**: `src/__tests__/api/portfolios/portfolio.test.ts`
**–°—Ç—Ä–æ–∫–∏**: 88-113

### –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –¥–µ–ø–æ–∑–∏—Ç **–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è** –ø–æ –º–æ–Ω–µ—Ç–∞–º.

```typescript
// –î–µ–ø–æ–∑–∏—Ç: 1000 USD
// BTC: 50%, ETH: 30%, ADA: 20%

const allocation = calculateExpectedAllocation(1000, coins);

expect(allocation['BTC']).toBe(500);  // 50%
expect(allocation['ETH']).toBe(300);  // 30%
expect(allocation['ADA']).toBe(200);  // 20%
```

**–ï—Å–ª–∏ —ç—Ç–æ—Ç —Ç–µ—Å—Ç —Å–ª–æ–º–∞–µ—Ç—Å—è:**
- –î–µ–ø–æ–∑–∏—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫—É–ø–∏—Ç –Ω–µ —Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
- –ü—Ä–æ–ø–æ—Ä—Ü–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è –±—É–¥—É—Ç –Ω–µ–≤–µ—Ä–Ω—ã

---

## –ö–∞–∫ –Ω–∞–π—Ç–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:

### 1. –ß–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –≤ IDE:
```
‚ö†Ô∏è CRITICAL TEST
```

### 2. –ß–µ—Ä–µ–∑ grep:
```bash
grep -r "CRITICAL TEST" src/__tests__/
```

### 3. –ß–µ—Ä–µ–∑ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç:
–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –æ–ø–∏—Å–∞–Ω—ã –∑–¥–µ—Å—å —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫.

---

## –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç:

### ‚ùå –ù–ï –ù–ê–î–û:
- –£–¥–∞–ª—è—Ç—å —Ç–µ—Å—Ç
- –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç
- –ú–µ–Ω—è—Ç—å `expect()` —á—Ç–æ–±—ã —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª

### ‚úÖ –ù–ê–î–û:
1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Å—å** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫
2. **–ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –≤ —Ç–µ—Å—Ç–µ - —Ç–∞–º –æ–±—ä—è—Å–Ω–µ–Ω–æ –ø–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ
3. **–ù–∞–π–¥–∏ –±–∞–≥** –≤ –∫–æ–¥–µ, –∫–æ—Ç–æ—Ä—ã–π –ª–æ–º–∞–µ—Ç —Ç–µ—Å—Ç
4. **–ò—Å–ø—Ä–∞–≤—å –∫–æ–¥**, –Ω–µ —Ç–µ—Å—Ç
5. –ï—Å–ª–∏ **—Ä–µ–∞–ª—å–Ω–æ** –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É - —Å–Ω–∞—á–∞–ª–∞ **–æ–±—Å—É–¥–∏** –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤:

–ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—à—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, –æ—Ç–º–µ—Ç—å —Ç–µ—Å—Ç —Ç–∞–∫:

```typescript
// ‚ö†Ô∏è CRITICAL TEST - DO NOT REMOVE
// Why: [–ü–æ—á–µ–º—É —ç—Ç–æ—Ç —Ç–µ—Å—Ç –∫—Ä–∏—Ç–∏—á–µ–Ω]
// Use case: [–ö–æ–≥–¥–∞ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è]
// If this breaks: [–ß—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è]
it('should do critical thing', async () => {
  // test code
});
```

---

## –ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–µ—â–µ–π:

- [ ] `initialEntryPrice` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
- [ ] `initialAmount` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
- [ ] LONG profit —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ USD
- [ ] SHORT profit —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤ –º–æ–Ω–µ—Ç–∞—Ö (coins)
- [ ] Parent LONG –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ SHORT close
- [ ] Entry price –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ SHORT close
- [ ] Fees –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è (–≤—ã—á–∏—Ç–∞—é—Ç—Å—è/–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è)
- [ ] Coin allocation –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–µ–ø–æ–∑–∏—Ç

---

## –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã:

| –¢–µ—Å—Ç | –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç |
|------|------|--------|---------------|
| initialEntryPrice never changes | trade.test.ts | 315 | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞ |
| initialAmount never changes | trade.test.ts | 346 | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ |
| LONG profit USD | calculations.test.ts | 11 | –†–∞—Å—á–µ—Ç –ø—Ä–æ—Ñ–∏—Ç–∞ LONG –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö |
| SHORT profit coins | calculations.test.ts | 111 | –†–∞—Å—á–µ—Ç –ø—Ä–æ—Ñ–∏—Ç–∞ SHORT –≤ –º–æ–Ω–µ—Ç–∞—Ö |
| recalculate LONG entry price | calculations.test.ts | 230 | –ü–µ—Ä–µ—Å—á–µ—Ç —Ü–µ–Ω—ã –ø–æ—Å–ª–µ SHORT |
| Coin allocation 50-30-20 | portfolio.test.ts | 88 | –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–ø–æ–∑–∏—Ç–∞ |

---

## üî• –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è - –ù–ï –¢–†–û–ì–ê–ô –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã!

–õ—É—á—à–µ **—Å–ø—Ä–æ—Å–∏** –∏–ª–∏ **–ø—Ä–æ—á–∏—Ç–∞–π** —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –µ—â–µ —Ä–∞–∑.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –∑–∞—â–∏—â–∞—é—Ç —Å–∞–º—É—é –≤–∞–∂–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.**
